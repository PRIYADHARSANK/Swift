---FILE_START: ./LICENSE---
MIT License

Copyright (c) 2026 Dhars

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
---FILE_END---
---FILE_START: ./Compass.xcodeproj/project.pbxproj---
// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 46;
	objects = {

/* Begin PBXBuildFile section */
		647284251EB38CE9002474A2 /* UserDefauts+Extensions.swift in Sources */ = {isa = PBXBuildFile; fileRef = 647284241EB38CE9002474A2 /* UserDefauts+Extensions.swift */; };
		64BE1FD81EAC8E23009A00B6 /* MapViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64BE1FD71EAC8E23009A00B6 /* MapViewController.swift */; };
		64BE1FDA1EAC9217009A00B6 /* MapViewControllerDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64BE1FD91EAC9217009A00B6 /* MapViewControllerDelegate.swift */; };
		64E8BF6C1E9535A200B10108 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64E8BF6B1E9535A200B10108 /* AppDelegate.swift */; };
		64E8BF6E1E9535A200B10108 /* CompassViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64E8BF6D1E9535A200B10108 /* CompassViewController.swift */; };
		64E8BF711E9535A200B10108 /* Main.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 64E8BF6F1E9535A200B10108 /* Main.storyboard */; };
		64E8BF731E9535A200B10108 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = 64E8BF721E9535A200B10108 /* Assets.xcassets */; };
		64E8BF761E9535A200B10108 /* LaunchScreen.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 64E8BF741E9535A200B10108 /* LaunchScreen.storyboard */; };
		64E8BF7E1E953A6200B10108 /* LocationDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64E8BF7D1E953A6200B10108 /* LocationDelegate.swift */; };
		64E8BF801E953ACC00B10108 /* CLLocation+Extension.swift in Sources */ = {isa = PBXBuildFile; fileRef = 64E8BF7F1E953ACC00B10108 /* CLLocation+Extension.swift */; };
		E26F206D2620D08600E19C67 /* Pin.swift in Sources */ = {isa = PBXBuildFile; fileRef = E26F206C2620D08600E19C67 /* Pin.swift */; };
		E26F20702620D0ED00E19C67 /* Location.swift in Sources */ = {isa = PBXBuildFile; fileRef = E26F206F2620D0ED00E19C67 /* Location.swift */; };
		E26F20732620D55100E19C67 /* Pinresponse.swift in Sources */ = {isa = PBXBuildFile; fileRef = E26F20722620D55100E19C67 /* Pinresponse.swift */; };
/* End PBXBuildFile section */

/* Begin PBXFileReference section */
		647284241EB38CE9002474A2 /* UserDefauts+Extensions.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "UserDefauts+Extensions.swift"; sourceTree = "<group>"; };
		64BE1FD71EAC8E23009A00B6 /* MapViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = MapViewController.swift; sourceTree = "<group>"; };
		64BE1FD91EAC9217009A00B6 /* MapViewControllerDelegate.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = MapViewControllerDelegate.swift; sourceTree = "<group>"; };
		64E8BF681E9535A200B10108 /* compass.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = compass.app; sourceTree = BUILT_PRODUCTS_DIR; };
		64E8BF6B1E9535A200B10108 /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		64E8BF6D1E9535A200B10108 /* CompassViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = CompassViewController.swift; sourceTree = "<group>"; };
		64E8BF701E9535A200B10108 /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.storyboard; name = Base; path = Base.lproj/Main.storyboard; sourceTree = "<group>"; };
		64E8BF721E9535A200B10108 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		64E8BF751E9535A200B10108 /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.storyboard; name = Base; path = Base.lproj/LaunchScreen.storyboard; sourceTree = "<group>"; };
		64E8BF771E9535A200B10108 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
		64E8BF7D1E953A6200B10108 /* LocationDelegate.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = LocationDelegate.swift; sourceTree = "<group>"; };
		64E8BF7F1E953ACC00B10108 /* CLLocation+Extension.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "CLLocation+Extension.swift"; sourceTree = "<group>"; };
		E26F206C2620D08600E19C67 /* Pin.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Pin.swift; sourceTree = "<group>"; };
		E26F206F2620D0ED00E19C67 /* Location.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Location.swift; sourceTree = "<group>"; };
		E26F20722620D55100E19C67 /* Pinresponse.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Pinresponse.swift; sourceTree = "<group>"; };
/* End PBXFileReference section */

/* Begin PBXFrameworksBuildPhase section */
		64E8BF651E9535A200B10108 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		64E8BF5F1E9535A200B10108 = {
			isa = PBXGroup;
			children = (
				64E8BF6A1E9535A200B10108 /* compass */,
				64E8BF691E9535A200B10108 /* Products */,
			);
			sourceTree = "<group>";
		};
		64E8BF691E9535A200B10108 /* Products */ = {
			isa = PBXGroup;
			children = (
				64E8BF681E9535A200B10108 /* compass.app */,
			);
			name = Products;
			sourceTree = "<group>";
		};
		64E8BF6A1E9535A200B10108 /* compass */ = {
			isa = PBXGroup;
			children = (
				E26F206B2620D07900E19C67 /* Models */,
				64BE1FD71EAC8E23009A00B6 /* MapViewController.swift */,
				64BE1FD91EAC9217009A00B6 /* MapViewControllerDelegate.swift */,
				64E8BF6B1E9535A200B10108 /* AppDelegate.swift */,
				64E8BF6D1E9535A200B10108 /* CompassViewController.swift */,
				647284241EB38CE9002474A2 /* UserDefauts+Extensions.swift */,
				64E8BF7D1E953A6200B10108 /* LocationDelegate.swift */,
				64E8BF7F1E953ACC00B10108 /* CLLocation+Extension.swift */,
				64E8BF6F1E9535A200B10108 /* Main.storyboard */,
				64E8BF721E9535A200B10108 /* Assets.xcassets */,
				64E8BF741E9535A200B10108 /* LaunchScreen.storyboard */,
				64E8BF771E9535A200B10108 /* Info.plist */,
			);
			path = compass;
			sourceTree = "<group>";
		};
		E26F206B2620D07900E19C67 /* Models */ = {
			isa = PBXGroup;
			children = (
				E26F206C2620D08600E19C67 /* Pin.swift */,
				E26F206F2620D0ED00E19C67 /* Location.swift */,
				E26F20722620D55100E19C67 /* Pinresponse.swift */,
			);
			path = Models;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXNativeTarget section */
		64E8BF671E9535A200B10108 /* compass */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 64E8BF7A1E9535A200B10108 /* Build configuration list for PBXNativeTarget "compass" */;
			buildPhases = (
				64E8BF641E9535A200B10108 /* Sources */,
				64E8BF651E9535A200B10108 /* Frameworks */,
				64E8BF661E9535A200B10108 /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = compass;
			productName = compass;
			productReference = 64E8BF681E9535A200B10108 /* compass.app */;
			productType = "com.apple.product-type.application";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		64E8BF601E9535A200B10108 /* Project object */ = {
			isa = PBXProject;
			attributes = {
				LastSwiftUpdateCheck = 0830;
				LastUpgradeCheck = 1240;
				ORGANIZATIONNAME = "Dhars";
				TargetAttributes = {
					64E8BF671E9535A200B10108 = {
						CreatedOnToolsVersion = 8.3;
						DevelopmentTeam = TNS44TZY6M;
						ProvisioningStyle = Automatic;
					};
				};
			};
			buildConfigurationList = 64E8BF631E9535A200B10108 /* Build configuration list for PBXProject "Compass" */;
			compatibilityVersion = "Xcode 3.2";
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = 64E8BF5F1E9535A200B10108;
			productRefGroup = 64E8BF691E9535A200B10108 /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				64E8BF671E9535A200B10108 /* compass */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		64E8BF661E9535A200B10108 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				64E8BF761E9535A200B10108 /* LaunchScreen.storyboard in Resources */,
				64E8BF731E9535A200B10108 /* Assets.xcassets in Resources */,
				64E8BF711E9535A200B10108 /* Main.storyboard in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		64E8BF641E9535A200B10108 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E26F20732620D55100E19C67 /* Pinresponse.swift in Sources */,
				64E8BF6E1E9535A200B10108 /* CompassViewController.swift in Sources */,
				64E8BF801E953ACC00B10108 /* CLLocation+Extension.swift in Sources */,
				64BE1FDA1EAC9217009A00B6 /* MapViewControllerDelegate.swift in Sources */,
				E26F206D2620D08600E19C67 /* Pin.swift in Sources */,
				E26F20702620D0ED00E19C67 /* Location.swift in Sources */,
				647284251EB38CE9002474A2 /* UserDefauts+Extensions.swift in Sources */,
				64E8BF7E1E953A6200B10108 /* LocationDelegate.swift in Sources */,
				64BE1FD81EAC8E23009A00B6 /* MapViewController.swift in Sources */,
				64E8BF6C1E9535A200B10108 /* AppDelegate.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin PBXVariantGroup section */
		64E8BF6F1E9535A200B10108 /* Main.storyboard */ = {
			isa = PBXVariantGroup;
			children = (
				64E8BF701E9535A200B10108 /* Base */,
			);
			name = Main.storyboard;
			sourceTree = "<group>";
		};
		64E8BF741E9535A200B10108 /* LaunchScreen.storyboard */ = {
			isa = PBXVariantGroup;
			children = (
				64E8BF751E9535A200B10108 /* Base */,
			);
			name = LaunchScreen.storyboard;
			sourceTree = "<group>";
		};
/* End PBXVariantGroup section */

/* Begin XCBuildConfiguration section */
		64E8BF781E9535A200B10108 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = dwarf;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				GCC_C_LANGUAGE_STANDARD = gnu99;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 12.0;
				MTL_ENABLE_DEBUG_INFO = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = iphoneos;
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG;
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				TARGETED_DEVICE_FAMILY = "1,2";
			};
			name = Debug;
		};
		64E8BF791E9535A200B10108 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				GCC_C_LANGUAGE_STANDARD = gnu99;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 12.0;
				MTL_ENABLE_DEBUG_INFO = NO;
				SDKROOT = iphoneos;
				SWIFT_OPTIMIZATION_LEVEL = "-Owholemodule";
				TARGETED_DEVICE_FAMILY = "1,2";
				VALIDATE_PRODUCT = YES;
			};
			name = Release;
		};
		64E8BF7B1E9535A200B10108 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CODE_SIGN_IDENTITY = "Apple Development";
				CODE_SIGN_STYLE = Automatic;
				DEVELOPMENT_TEAM = TNS44TZY6M;
				INFOPLIST_FILE = compass/Info.plist;
				IPHONEOS_DEPLOYMENT_TARGET = 12.0;
				LD_RUNPATH_SEARCH_PATHS = "$(inherited) @executable_path/Frameworks";
				PRODUCT_BUNDLE_IDENTIFIER = andresvidoza;
				PRODUCT_NAME = "$(TARGET_NAME)";
				PROVISIONING_PROFILE_SPECIFIER = "";
				SWIFT_VERSION = 5.0;
			};
			name = Debug;
		};
		64E8BF7C1E9535A200B10108 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CODE_SIGN_IDENTITY = "Apple Development";
				CODE_SIGN_STYLE = Automatic;
				DEVELOPMENT_TEAM = TNS44TZY6M;
				INFOPLIST_FILE = compass/Info.plist;
				IPHONEOS_DEPLOYMENT_TARGET = 12.0;
				LD_RUNPATH_SEARCH_PATHS = "$(inherited) @executable_path/Frameworks";
				PRODUCT_BUNDLE_IDENTIFIER = andresvidoza;
				PRODUCT_NAME = "$(TARGET_NAME)";
				PROVISIONING_PROFILE_SPECIFIER = "";
				SWIFT_VERSION = 5.0;
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		64E8BF631E9535A200B10108 /* Build configuration list for PBXProject "Compass" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				64E8BF781E9535A200B10108 /* Debug */,
				64E8BF791E9535A200B10108 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		64E8BF7A1E9535A200B10108 /* Build configuration list for PBXNativeTarget "compass" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				64E8BF7B1E9535A200B10108 /* Debug */,
				64E8BF7C1E9535A200B10108 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */
	};
	rootObject = 64E8BF601E9535A200B10108 /* Project object */;
}
---FILE_END---
---FILE_START: ./Compass.xcodeproj/project.xcworkspace/contents.xcworkspacedata---
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "self:/Users/dhars/Desktop/desktop/Swift/geo-app/Compass.xcodeproj">
   </FileRef>
</Workspace>
---FILE_END---
---FILE_START: ./Compass.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist---
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDEDidComputeMac32BitWarning</key>
	<true/>
</dict>
</plist>
---FILE_END---
---FILE_START: ./README.md---
# Compass

Welcome to Geo App! An app built by Dhars.

## How to build the App
1. Install the latest [Xcode developer tools](https://developer.apple.com/xcode/downloads/) from Apple.
2. Clone the repository: `$ git clone https://github.com/dhars/geo-app`
3. Open `Compass.xcodeproj` in Xcode.
4. Build the `compass` scheme in Xcode.
5. Enjoy! üöÄ


---FILE_END---
---FILE_START: ./compass/CLLocation+Extension.swift---
//
//  CLLocation+Extension.swift
//  compass
//
//  Created by Dhars on 05/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import Foundation
import CoreLocation
import UIKit

public extension CLLocation {
  func bearingToLocationRadian(_ destinationLocation: CLLocation) -> CGFloat {
    
    let lat1 = self.coordinate.latitude.degreesToRadians
    let lon1 = self.coordinate.longitude.degreesToRadians
    
    let lat2 = destinationLocation.coordinate.latitude.degreesToRadians
    let lon2 = destinationLocation.coordinate.longitude.degreesToRadians
    
    let dLon = lon2 - lon1
    
    let y = sin(dLon) * cos(lat2)
    let x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon)
    let radiansBearing = atan2(y, x)
    
    return CGFloat(radiansBearing)
  }
  
  func bearingToLocationDegrees(destinationLocation: CLLocation) -> CGFloat {
    return bearingToLocationRadian(destinationLocation).radiansToDegrees
  }
}

extension CGFloat {
  var degreesToRadians: CGFloat { return self * .pi / 180 }
  var radiansToDegrees: CGFloat { return self * 180 / .pi }
}

private extension Double {
  var degreesToRadians: Double { return Double(CGFloat(self).degreesToRadians) }
  var radiansToDegrees: Double { return Double(CGFloat(self).radiansToDegrees) }
}
---FILE_END---
---FILE_START: ./compass/UserDefauts+Extensions.swift---
//
//  UserDefauts+Extensions.swift
//  Compass
//
//  Created by Dhars on 28/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import Foundation
import CoreLocation

extension UserDefaults {
  var currentLocation: CLLocation {
    get { return CLLocation(latitude: latitude ?? 90, longitude: longitude ?? 0) } // default value is North Pole (lat: 90, long: 0)
    set { latitude = newValue.coordinate.latitude
          longitude = newValue.coordinate.longitude }
  }
  
  private var latitude: Double? {
    get {
      if let _ = object(forKey: #function) {
        return double(forKey: #function)
      }
      return nil
    }
    set { set(newValue, forKey: #function) }
  }
  
  private var longitude: Double? {
    get {
      if let _ = object(forKey: #function) {
        return double(forKey: #function)
      }
      return nil
    }
    set { set(newValue, forKey: #function) }
  }
}
---FILE_END---
---FILE_START: ./compass/MapViewController.swift---
//
//  MapViewController.swift
//  compass
//
//  Created by Dhars on 23/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import UIKit
import MapKit

class MapViewController: UIViewController {
  var delegate: MapViewControllerDelegate!
  @IBOutlet weak var mapView: MKMapView!
  
  @IBAction func cancelTap(_ sender: UIBarButtonItem) {
    self.dismiss(animated: true, completion: nil)
  }
  
  @IBAction func resetTap(_ sender: UIBarButtonItem) {
    delegate.update(location: CLLocation(latitude: 90, longitude: 0))
    self.dismiss(animated: true, completion: nil)
  }
  
  override func viewWillAppear(_ animated: Bool) {
    mapView.showsUserLocation = true
    if #available(iOS 9, *) {
      mapView.showsScale = true
      mapView.showsCompass = true
    }
  }
  
  override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    let gestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(MapViewController.didTap(_:)))
    mapView.addGestureRecognizer(gestureRecognizer)
  }

    @objc public func didTap(_ gestureRecognizer: UIGestureRecognizer) {
    let location = gestureRecognizer.location(in: mapView)
    let coordinate = mapView.convert(location, toCoordinateFrom: mapView)
        
    // PinID
    var pinId: String = "1";
    
    delegate.update(location: CLLocation(latitude: coordinate.latitude, longitude: coordinate.longitude))
        
        // GET ALL PINS
        let urlget = URL(string: "http://192.168.2.90:5000/api/v1/pins")!

        let taskget = URLSession.shared.dataTask(with: urlget) {(data, response, error) in
            guard let data = data else { return }
            if error == nil {
                // Parse JSON
                let decoder = JSONDecoder()
                
                do{
                    let pinResponse = try decoder.decode(Pinresponse.self, from: data)
                    if(pinResponse.data?.count == 0){
                        print(pinResponse.data)
                    }else{
                        guard let dataPins = pinResponse.data else { return }
                        guard let lastDataPin = dataPins.last else { return }
                        let myInt1 = Int(lastDataPin.pinId ?? "1") ?? 0
                        let newPin = myInt1 + 1;
                        pinId = String(newPin);
                    }
                    
                    postData(longitude: coordinate.longitude, latitude: coordinate.latitude, pinId: pinId);
                }catch{
                    print(error.localizedDescription)
                }
            }
        }

        taskget.resume()
        
        
        
    self.dismiss(animated: true, completion: nil)
  }
}

func postData(longitude: Double, latitude: Double, pinId: String){
    
    // SEND COORDINATES TO MY API
    
    // prepare json data
    let json: [String: Any] = [
        "pinId": pinId,
        "location": [
            "coordinates": [longitude, latitude]
        ]
    ]

    let jsonData = try? JSONSerialization.data(withJSONObject: json)

    // create post request
    let url = URL(string: "http://192.168.2.90:5000/api/v1/pins")!
    var request = URLRequest(url: url)
    request.httpMethod = "POST"
    request.addValue("application/json", forHTTPHeaderField: "Content-Type")

    // insert json data to the request
    request.httpBody = jsonData

    let task = URLSession.shared.dataTask(with: request) { data, response, error in
        guard let data = data, error == nil else {
            print(error?.localizedDescription ?? "No data")
            return
        }
        let responseJSON = try? JSONSerialization.jsonObject(with: data, options: [])
        if let responseJSON = responseJSON as? [String: Any] {
            print(responseJSON)
        }
    }

    task.resume()
}


---FILE_END---
---FILE_START: ./compass/Assets.xcassets/arrow.imageset/Contents.json---
{
  "images" : [
    {
      "idiom" : "universal",
      "filename" : "Icon.jpg",
      "scale" : "1x"
    },
    {
      "idiom" : "universal",
      "scale" : "2x"
    },
    {
      "idiom" : "universal",
      "scale" : "3x"
    }
  ],
  "info" : {
    "version" : 1,
    "author" : "xcode"
  }
}---FILE_END---
---FILE_START: ./compass/Assets.xcassets/AppIcon.appiconset/Contents.json---
{
  "images" : [
    {
      "idiom" : "iphone",
      "scale" : "2x",
      "size" : "20x20"
    },
    {
      "idiom" : "iphone",
      "scale" : "3x",
      "size" : "20x20"
    },
    {
      "filename" : "Icon-Small.png",
      "idiom" : "iphone",
      "scale" : "1x",
      "size" : "29x29"
    },
    {
      "filename" : "Icon-Small@2x.png",
      "idiom" : "iphone",
      "scale" : "2x",
      "size" : "29x29"
    },
    {
      "filename" : "Icon-Small@3x.png",
      "idiom" : "iphone",
      "scale" : "3x",
      "size" : "29x29"
    },
    {
      "filename" : "Icon-Small-40@2x.png",
      "idiom" : "iphone",
      "scale" : "2x",
      "size" : "40x40"
    },
    {
      "filename" : "Icon-Small-40@3x.png",
      "idiom" : "iphone",
      "scale" : "3x",
      "size" : "40x40"
    },
    {
      "filename" : "Icon.png",
      "idiom" : "iphone",
      "scale" : "1x",
      "size" : "57x57"
    },
    {
      "filename" : "Icon@2x.png",
      "idiom" : "iphone",
      "scale" : "2x",
      "size" : "57x57"
    },
    {
      "filename" : "Icon-60@2x.png",
      "idiom" : "iphone",
      "scale" : "2x",
      "size" : "60x60"
    },
    {
      "filename" : "Icon-60@3x.png",
      "idiom" : "iphone",
      "scale" : "3x",
      "size" : "60x60"
    },
    {
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "20x20"
    },
    {
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "20x20"
    },
    {
      "filename" : "Icon-Small.png",
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "29x29"
    },
    {
      "filename" : "Icon-Small@2x.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "29x29"
    },
    {
      "filename" : "Icon-Small-40.png",
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "40x40"
    },
    {
      "filename" : "Icon-Small-40@2x.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "40x40"
    },
    {
      "filename" : "Icon-Small-50.png",
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "50x50"
    },
    {
      "filename" : "Icon-Small-50@2x.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "50x50"
    },
    {
      "filename" : "Icon-72.png",
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "72x72"
    },
    {
      "filename" : "Icon-72@2x.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "72x72"
    },
    {
      "filename" : "Icon-76.png",
      "idiom" : "ipad",
      "scale" : "1x",
      "size" : "76x76"
    },
    {
      "filename" : "Icon-76@2x.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "76x76"
    },
    {
      "filename" : "Icon-167.png",
      "idiom" : "ipad",
      "scale" : "2x",
      "size" : "83.5x83.5"
    },
    {
      "idiom" : "ios-marketing",
      "scale" : "1x",
      "size" : "1024x1024"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}
---FILE_END---
---FILE_START: ./compass/Assets.xcassets/Contents.json---
{
  "info" : {
    "version" : 1,
    "author" : "xcode"
  }
}---FILE_END---
---FILE_START: ./compass/Models/Location.swift---
//
//  Location.swift
//  compass
//
//  Created by Dhars on 2021-04-09.
//  Copyright ¬© 2021 Dhars. All rights reserved.
//

import Foundation

struct Location: Codable{
    let coordinates: [Double]?
}
---FILE_END---
---FILE_START: ./compass/Models/Pinresponse.swift---
//
//  Pinresponse.swift
//  compass
//
//  Created by Dhars on 2021-04-09.
//  Copyright ¬© 2021 Dhars. All rights reserved.
//

import Foundation

struct Pinresponse: Codable{
    let success: Bool?
    let count: Int?
    let data: [Pin]?
}
---FILE_END---
---FILE_START: ./compass/Models/Pin.swift---
//
//  Pin.swift
//  compass
//
//  Created by Dhars on 2021-04-09.
//  Copyright ¬© 2021 Dhars. All rights reserved.
//

import Foundation

struct Pin: Codable{
    let location: Location?
    let _id: String?
    let pinId: String?
    let createdAt: String?
    let __v: Int?
}

---FILE_END---
---FILE_START: ./compass/LocationDelegate.swift---
//
//  LocationDelegate.swift
//  compass
//
//  Created by Dhars on 05/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import Foundation
import CoreLocation

class LocationDelegate: NSObject, CLLocationManagerDelegate {
  var locationCallback: ((CLLocation) -> ())? = nil
  var headingCallback: ((CLLocationDirection) -> ())? = nil
  
  func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
    guard let currentLocation = locations.last else { return }
    guard let currentLatitude = locations.last else { return }
//
//    print(" This is the latitude for your device \(currentLatitude.coordinate.latitude) ");
//    print(" This is the longitude for your device \(currentLatitude.coordinate.longitude) ");
//
    // PUT to update users location
    // prepare json data
    let json: [String: Any] = [
        "userId": "andresvidoza",
        "location": [
            "coordinates": [currentLatitude.coordinate.longitude, currentLatitude.coordinate.latitude]
        ]
    ]

    let jsonData = try? JSONSerialization.data(withJSONObject: json)

    // create post request
    let url = URL(string: "http://192.168.2.90:5000/api/v1/user")!
    var request = URLRequest(url: url)
    request.httpMethod = "PUT"
    request.addValue("application/json", forHTTPHeaderField: "Content-Type")

    // insert json data to the request
    request.httpBody = jsonData

    let task = URLSession.shared.dataTask(with: request) { data, response, error in
        guard let data = data, error == nil else {
            print(error?.localizedDescription ?? "No data")
            return
        }
        let responseJSON = try? JSONSerialization.jsonObject(with: data, options: [])
        if let responseJSON = responseJSON as? [String: Any] {
            print(responseJSON)
        }
    }

    task.resume()
    
    locationCallback?(currentLocation)
  }
  
  func locationManager(_ manager: CLLocationManager, didUpdateHeading newHeading: CLHeading) {
    headingCallback?(newHeading.trueHeading)
  }
  
  func locationManager(_ manager: CLLocationManager, didFailWithError error: Error) {
    print("‚ö†Ô∏è Error while updating location " + error.localizedDescription)
  }
}
---FILE_END---
---FILE_START: ./compass/Base.lproj/LaunchScreen.storyboard---
<?xml version="1.0" encoding="UTF-8"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="12120" systemVersion="16E195" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" launchScreen="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="01J-lp-oVM">
    <device id="retina4_7" orientation="portrait">
        <adaptation id="fullscreen"/>
    </device>
    <dependencies>
        <deployment identifier="iOS"/>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="12088"/>
        <capability name="Aspect ratio constraints" minToolsVersion="5.1"/>
        <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
    </dependencies>
    <scenes>
        <!--View Controller-->
        <scene sceneID="EHf-IW-A2E">
            <objects>
                <viewController id="01J-lp-oVM" sceneMemberID="viewController">
                    <layoutGuides>
                        <viewControllerLayoutGuide type="top" id="Llm-lL-Icb"/>
                        <viewControllerLayoutGuide type="bottom" id="xb3-aO-Qok"/>
                    </layoutGuides>
                    <view key="view" contentMode="scaleToFill" id="Ze5-6b-2t3">
                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <imageView userInteractionEnabled="NO" contentMode="scaleAspectFit" horizontalHuggingPriority="251" verticalHuggingPriority="251" image="arrow" translatesAutoresizingMaskIntoConstraints="NO" id="jY0-zq-k5b">
                                <rect key="frame" x="0.0" y="146" width="375" height="375"/>
                                <constraints>
                                    <constraint firstAttribute="width" secondItem="jY0-zq-k5b" secondAttribute="height" multiplier="1:1" id="Lai-Hz-aaG"/>
                                </constraints>
                            </imageView>
                        </subviews>
                        <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                        <constraints>
                            <constraint firstItem="jY0-zq-k5b" firstAttribute="centerX" secondItem="Ze5-6b-2t3" secondAttribute="centerX" id="3PK-5Q-zZm"/>
                            <constraint firstItem="jY0-zq-k5b" firstAttribute="width" relation="lessThanOrEqual" secondItem="Ze5-6b-2t3" secondAttribute="width" id="J4z-ig-2AN"/>
                            <constraint firstItem="jY0-zq-k5b" firstAttribute="height" relation="lessThanOrEqual" secondItem="Ze5-6b-2t3" secondAttribute="height" id="dm9-Eu-mRe"/>
                            <constraint firstItem="jY0-zq-k5b" firstAttribute="centerY" secondItem="Ze5-6b-2t3" secondAttribute="centerY" id="y8o-yV-Zfh"/>
                        </constraints>
                    </view>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="iYj-Kq-Ea1" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="52" y="374.66266866566718"/>
        </scene>
    </scenes>
    <resources>
        <image name="arrow" width="1024" height="1024"/>
    </resources>
</document>
---FILE_END---
---FILE_START: ./compass/Base.lproj/Main.storyboard---
<?xml version="1.0" encoding="UTF-8"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="12120" systemVersion="16E195" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="BYZ-38-t0r">
    <device id="retina4_7" orientation="portrait">
        <adaptation id="fullscreen"/>
    </device>
    <dependencies>
        <deployment identifier="iOS"/>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="12088"/>
        <capability name="Aspect ratio constraints" minToolsVersion="5.1"/>
        <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
    </dependencies>
    <scenes>
        <!--Compass View Controller-->
        <scene sceneID="tne-QT-ifu">
            <objects>
                <viewController id="BYZ-38-t0r" customClass="CompassViewController" customModule="compass" customModuleProvider="target" sceneMemberID="viewController">
                    <layoutGuides>
                        <viewControllerLayoutGuide type="top" id="y3c-jy-aDJ"/>
                        <viewControllerLayoutGuide type="bottom" id="wfy-db-euE"/>
                    </layoutGuides>
                    <view key="view" contentMode="scaleToFill" id="8bC-Xf-vdC">
                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <imageView userInteractionEnabled="NO" contentMode="scaleAspectFit" horizontalHuggingPriority="251" verticalHuggingPriority="251" image="arrow" translatesAutoresizingMaskIntoConstraints="NO" id="7t5-o5-sfu">
                                <rect key="frame" x="-0.5" y="145.5" width="375" height="375"/>
                                <accessibility key="accessibilityConfiguration">
                                    <accessibilityTraits key="traits" image="YES" allowsDirectInteraction="YES"/>
                                </accessibility>
                                <constraints>
                                    <constraint firstAttribute="width" secondItem="7t5-o5-sfu" secondAttribute="height" multiplier="1:1" id="pwz-cf-sZU"/>
                                </constraints>
                            </imageView>
                        </subviews>
                        <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                        <constraints>
                            <constraint firstItem="7t5-o5-sfu" firstAttribute="width" relation="lessThanOrEqual" secondItem="8bC-Xf-vdC" secondAttribute="width" id="95A-hf-n8F"/>
                            <constraint firstItem="7t5-o5-sfu" firstAttribute="centerX" secondItem="8bC-Xf-vdC" secondAttribute="centerX" id="HoT-w6-N01"/>
                            <constraint firstItem="7t5-o5-sfu" firstAttribute="height" relation="lessThanOrEqual" secondItem="8bC-Xf-vdC" secondAttribute="height" id="u3y-qj-TJj"/>
                            <constraint firstItem="7t5-o5-sfu" firstAttribute="centerY" secondItem="8bC-Xf-vdC" secondAttribute="centerY" id="zAq-kZ-5rR"/>
                        </constraints>
                    </view>
                    <connections>
                        <outlet property="imageView" destination="7t5-o5-sfu" id="MI8-vw-ATu"/>
                    </connections>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="dkx-z0-nzr" sceneMemberID="firstResponder"/>
            </objects>
        </scene>
        <!--Tap to the Destination-->
        <scene sceneID="n4H-RM-PaH">
            <objects>
                <viewController id="hdZ-vP-bdb" customClass="MapViewController" customModule="compass" customModuleProvider="target" sceneMemberID="viewController">
                    <layoutGuides>
                        <viewControllerLayoutGuide type="top" id="ebR-zg-1zo"/>
                        <viewControllerLayoutGuide type="bottom" id="zuF-Ho-hGa"/>
                    </layoutGuides>
                    <view key="view" contentMode="scaleToFill" id="EzX-I6-uXY">
                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <mapView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" mapType="standard" translatesAutoresizingMaskIntoConstraints="NO" id="a55-uR-U7e">
                                <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                            </mapView>
                        </subviews>
                        <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                        <constraints>
                            <constraint firstItem="a55-uR-U7e" firstAttribute="top" secondItem="EzX-I6-uXY" secondAttribute="top" id="AYW-fR-BIg"/>
                            <constraint firstAttribute="trailing" secondItem="a55-uR-U7e" secondAttribute="trailing" id="QTj-5X-3WH"/>
                            <constraint firstItem="a55-uR-U7e" firstAttribute="leading" secondItem="EzX-I6-uXY" secondAttribute="leading" id="ZfZ-hK-5cv"/>
                            <constraint firstItem="zuF-Ho-hGa" firstAttribute="top" secondItem="a55-uR-U7e" secondAttribute="bottom" id="vG6-rl-mhy"/>
                        </constraints>
                    </view>
                    <navigationItem key="navigationItem" title="Tap to the Destination" id="d7B-cu-ebZ">
                        <barButtonItem key="leftBarButtonItem" title="Cancel" id="pbB-fx-iRe">
                            <connections>
                                <action selector="cancelTap:" destination="hdZ-vP-bdb" id="X6x-6q-170"/>
                            </connections>
                        </barButtonItem>
                        <barButtonItem key="rightBarButtonItem" title="Reset" id="mGz-5U-v75">
                            <connections>
                                <action selector="resetTap:" destination="hdZ-vP-bdb" id="IbE-Od-Bvf"/>
                            </connections>
                        </barButtonItem>
                    </navigationItem>
                    <connections>
                        <outlet property="mapView" destination="a55-uR-U7e" id="j1m-X6-Q3d"/>
                    </connections>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="jL2-oH-RVV" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="1612" y="36"/>
        </scene>
        <!--Navigation Controller-->
        <scene sceneID="Fde-i1-iph">
            <objects>
                <navigationController storyboardIdentifier="MapViewController" automaticallyAdjustsScrollViewInsets="NO" id="Fy1-bi-l2w" sceneMemberID="viewController">
                    <toolbarItems/>
                    <navigationBar key="navigationBar" contentMode="scaleToFill" id="DGB-x8-dHV">
                        <rect key="frame" x="0.0" y="0.0" width="375" height="44"/>
                        <autoresizingMask key="autoresizingMask"/>
                    </navigationBar>
                    <nil name="viewControllers"/>
                    <connections>
                        <segue destination="hdZ-vP-bdb" kind="relationship" relationship="rootViewController" id="gYi-UM-WW9"/>
                    </connections>
                </navigationController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="FDA-ox-gy8" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="804" y="36"/>
        </scene>
    </scenes>
    <resources>
        <image name="arrow" width="1024" height="1024"/>
    </resources>
</document>
---FILE_END---
---FILE_START: ./compass/MapViewControllerDelegate.swift---
//
//  MapViewControllerDelegate.swift
//  compass
//
//  Created by Dhars on 23/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import Foundation
import CoreLocation

protocol MapViewControllerDelegate {
  func update(location: CLLocation)
}
---FILE_END---
---FILE_START: ./compass/AppDelegate.swift---
//
//  AppDelegate.swift
//  compass
//
//  Created by Dhars on 05/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import UIKit

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

  var window: UIWindow?


    internal func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    // Override point for customization after application launch.
    return true
  }

  func applicationWillResignActive(_ application: UIApplication) {
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and invalidate graphics rendering callbacks. Games should use this method to pause the game.
  }

  func applicationDidEnterBackground(_ application: UIApplication) {
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
  }

  func applicationWillEnterForeground(_ application: UIApplication) {
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
  }

  func applicationDidBecomeActive(_ application: UIApplication) {
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
  }

  func applicationWillTerminate(_ application: UIApplication) {
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
  }


}

---FILE_END---
---FILE_START: ./compass/Info.plist---
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>NSAppTransportSecurity</key>
	<dict>
		<key>NSAllowsArbitraryLoads</key>
		<true/>
	</dict>
	<key>CFBundleDevelopmentRegion</key>
	<string>en</string>
	<key>CFBundleDisplayName</key>
	<string>Compass ‚àô</string>
	<key>CFBundleExecutable</key>
	<string>$(EXECUTABLE_NAME)</string>
	<key>CFBundleIdentifier</key>
	<string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>
	<key>CFBundleInfoDictionaryVersion</key>
	<string>6.0</string>
	<key>CFBundleName</key>
	<string>Compass ‚àô</string>
	<key>CFBundlePackageType</key>
	<string>APPL</string>
	<key>CFBundleShortVersionString</key>
	<string>1.0</string>
	<key>CFBundleVersion</key>
	<string>2</string>
	<key>LSRequiresIPhoneOS</key>
	<true/>
	<key>NSLocationWhenInUseUsageDescription</key>
	<string>The device location is used to compare it with your destinations.</string>
	<key>UILaunchStoryboardName</key>
	<string>LaunchScreen</string>
	<key>UIMainStoryboardFile</key>
	<string>Main</string>
	<key>UIRequiredDeviceCapabilities</key>
	<array>
		<string>armv7</string>
		<string>magnetometer</string>
		<string>gps</string>
	</array>
	<key>UISupportedInterfaceOrientations</key>
	<array>
		<string>UIInterfaceOrientationPortrait</string>
		<string>UIInterfaceOrientationLandscapeRight</string>
		<string>UIInterfaceOrientationLandscapeLeft</string>
	</array>
	<key>UISupportedInterfaceOrientations~ipad</key>
	<array>
		<string>UIInterfaceOrientationPortrait</string>
		<string>UIInterfaceOrientationPortraitUpsideDown</string>
		<string>UIInterfaceOrientationLandscapeLeft</string>
		<string>UIInterfaceOrientationLandscapeRight</string>
	</array>
</dict>
</plist>
---FILE_END---
---FILE_START: ./compass/CompassViewController.swift---
//
//  CompassViewController.swift
//  compass
//
//  Created by Dhars on 05/04/2017.
//  Copyright ¬© 2017 Dhars. All rights reserved.
//

import UIKit
import CoreLocation

class CompassViewController: UIViewController {
  @IBOutlet weak var imageView: UIImageView!
  
  let locationDelegate = LocationDelegate()
  var latestLocation: CLLocation? = nil
  var yourLocationBearing: CGFloat { return latestLocation?.bearingToLocationRadian(self.yourLocation) ?? 0 }
  var yourLocation: CLLocation {
    get { return UserDefaults.standard.currentLocation }
    set { UserDefaults.standard.currentLocation = newValue }
  }
  
  let locationManager: CLLocationManager = {
    $0.requestWhenInUseAuthorization()
    $0.desiredAccuracy = kCLLocationAccuracyBest
    $0.startUpdatingLocation()
    $0.startUpdatingHeading()
    return $0
  }(CLLocationManager())
  
  private func orientationAdjustment() -> CGFloat {
    let isFaceDown: Bool = {
      switch UIDevice.current.orientation {
      case .faceDown: return true
      default: return false
      }
    }()
    
    let adjAngle: CGFloat = {
      switch UIApplication.shared.statusBarOrientation {
      case .landscapeLeft:  return 90
      case .landscapeRight: return -90
      case .portrait, .unknown: return 0
      case .portraitUpsideDown: return isFaceDown ? 180 : -180
      }
    }()
    return adjAngle
  }
  
    // when the view loads
  override func viewDidLoad() {
    super.viewDidLoad()
    locationManager.delegate = locationDelegate
    
    // location of my device at all times
    locationDelegate.locationCallback = { location in
      self.latestLocation = location
    }
    
    locationDelegate.headingCallback = { newHeading in
      
      func computeNewAngle(with newAngle: CGFloat) -> CGFloat {
        let heading: CGFloat = {
          let originalHeading = self.yourLocationBearing - newAngle.degreesToRadians
          switch UIDevice.current.orientation {
          case .faceDown: return -originalHeading
          default: return originalHeading
          }
        }()
        
        return CGFloat(self.orientationAdjustment().degreesToRadians + heading)
      }
      
      UIView.animate(withDuration: 0.5) {
        let angle = computeNewAngle(with: CGFloat(newHeading))
        self.imageView.transform = CGAffineTransform(rotationAngle: angle)
      }
    }
    
    let tapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(CompassViewController.showMap))
    view.addGestureRecognizer(tapGestureRecognizer)
  }
  
    @objc func showMap() {
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    let mapViewController = storyboard.instantiateViewController(withIdentifier: "MapViewController")
    ((mapViewController as? UINavigationController)?.viewControllers.first as? MapViewController)?.delegate = self
    self.present(mapViewController, animated: true, completion: nil)
  }
}

extension CompassViewController: MapViewControllerDelegate {
  func update(location: CLLocation) {
    yourLocation = location
  }
}
---FILE_END---
