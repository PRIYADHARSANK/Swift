[
  {
    "path": "compass/CLLocation+Extension.swift",
    "content": "//\n//  CLLocation+Extension.swift\n//  compass\n//\n//  Created by Dhars on 05/04/2017.\n//  Copyright \u00a9 2017 Dhars. All rights reserved.\n//\n\nimport Foundation\nimport CoreLocation\nimport UIKit\n\npublic extension CLLocation {\n  func bearingToLocationRadian(_ destinationLocation: CLLocation) -> CGFloat {\n    \n    let lat1 = self.coordinate.latitude.degreesToRadians\n    let lon1 = self.coordinate.longitude.degreesToRadians\n    \n    let lat2 = destinationLocation.coordinate.latitude.degreesToRadians\n    let lon2 = destinationLocation.coordinate.longitude.degreesToRadians\n    \n    let dLon = lon2 - lon1\n    \n    let y = sin(dLon) * cos(lat2)\n    let x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon)\n    let radiansBearing = atan2(y, x)\n    \n    return CGFloat(radiansBearing)\n  }\n  \n  func bearingToLocationDegrees(destinationLocation: CLLocation) -> CGFloat {\n    return bearingToLocationRadian(destinationLocation).radiansToDegrees\n  }\n}\n\nextension CGFloat {\n  var degreesToRadians: CGFloat { return self * .pi / 180 }\n  var radiansToDegrees: CGFloat { return self * 180 / .pi }\n}\n\nprivate extension Double {\n  var degreesToRadians: Double { return Double(CGFloat(self).degreesToRadians) }\n  var radiansToDegrees: Double { return Double(CGFloat(self).radiansToDegrees) }\n}\n"
  },
  {
    "path": "compass/UserDefauts+Extensions.swift",
    "content": "//\n//  UserDefauts+Extensions.swift\n//  Compass\n//\n//  Created by Dhars on 28/04/2017.\n//  Copyright \u00a9 2017 Dhars. All rights reserved.\n//\n\nimport Foundation\nimport CoreLocation\n\nextension UserDefaults {\n  var currentLocation: CLLocation {\n    get { return CLLocation(latitude: latitude ?? 90, longitude: longitude ?? 0) } // default value is North Pole (lat: 90, long: 0)\n    set { latitude = newValue.coordinate.latitude\n          longitude = newValue.coordinate.longitude }\n  }\n  \n  private var latitude: Double? {\n    get {\n      if let _ = object(forKey: #function) {\n        return double(forKey: #function)\n      }\n      return nil\n    }\n    set { set(newValue, forKey: #function) }\n  }\n  \n  private var longitude: Double? {\n    get {\n      if let _ = object(forKey: #function) {\n        return double(forKey: #function)\n      }\n      return nil\n    }\n    set { set(newValue, forKey: #function) }\n  }\n}\n"
  },
  {
    "path": "compass/MapViewController.swift",
    "content": "//\n//  MapViewController.swift\n//  compass\n//\n//  Created by Dhars on 23/04/2017.\n//  Copyright \u00a9 2017 Dhars. All rights reserved.\n//\n\nimport UIKit\nimport MapKit\n\nclass MapViewController: UIViewController {\n  var delegate: MapViewControllerDelegate!\n  @IBOutlet weak var mapView: MKMapView!\n  \n  @IBAction func cancelTap(_ sender: UIBarButtonItem) {\n    self.dismiss(animated: true, completion: nil)\n  }\n  \n  @IBAction func resetTap(_ sender: UIBarButtonItem) {\n    delegate.update(location: CLLocation(latitude: 90, longitude: 0))\n    self.dismiss(animated: true, completion: nil)\n  }\n  \n  override func viewWillAppear(_ animated: Bool) {\n    mapView.showsUserLocation = true\n    if #available(iOS 9, *) {\n      mapView.showsScale = true\n      mapView.showsCompass = true\n    }\n  }\n  \n  override func viewDidAppear(_ animated: Bool) {\n    super.viewDidAppear(animated)\n    let gestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(MapViewController.didTap(_:)))\n    mapView.addGestureRecognizer(gestureRecognizer)\n  }\n\n    @objc public func didTap(_ gestureRecognizer: UIGestureRecognizer) {\n    let location = gestureRecognizer.location(in: mapView)\n    let coordinate = mapView.convert(location, toCoordinateFrom: mapView)\n        \n    // PinID\n    var pinId: String = \"1\";\n    \n    delegate.update(location: CLLocation(latitude: coordinate.latitude, longitude: coordinate.longitude))\n        \n        // GET ALL PINS\n        let urlget = URL(string: \"http://192.168.2.90:5000/api/v1/pins\")!\n\n        let taskget = URLSession.shared.dataTask(with: urlget) {(data, response, error) in\n            guard let data = data else { return }\n            if error == nil {\n                // Parse JSON\n                let decoder = JSONDecoder()\n                \n                do{\n                    let pinResponse = try decoder.decode(Pinresponse.self, from: data)\n                    if(pinResponse.data?.count == 0){\n                        print(pinResponse.data)\n                    }else{\n                        guard let dataPins = pinResponse.data else { return }\n                        guard let lastDataPin = dataPins.last else { return }\n                        let myInt1 = Int(lastDataPin.pinId ?? \"1\") ?? 0\n                        let newPin = myInt1 + 1;\n                        pinId = String(newPin);\n                    }\n                    \n                    postData(longitude: coordinate.longitude, latitude: coordinate.latitude, pinId: pinId);\n                }catch{\n                    print(error.localizedDescription)\n                }\n            }\n        }\n\n        taskget.resume()\n        \n        \n        \n    self.dismiss(animated: true, completion: nil)\n  }\n}\n\nfunc postData(longitude: Double, latitude: Double, pinId: String){\n    \n    // SEND COORDINATES TO MY API\n    \n    // prepare json data\n    let json: [String: Any] = [\n        \"pinId\": pinId,\n        \"location\": [\n            \"coordinates\": [longitude, latitude]\n        ]\n    ]\n\n    let jsonData = try? JSONSerialization.data(withJSONObject: json)\n\n    // create post request\n    let url = URL(string: \"http://192.168.2.90:5000/api/v1/pins\")!\n    var request = URLRequest(url: url)\n    request.httpMethod = \"POST\"\n    request.addValue(\"application/json\", forHTTPHeaderField: \"Content-Type\")\n\n    // insert json data to the request\n    request.httpBody = jsonData\n\n    let task = URLSession.shared.dataTask(with: request) { data, response, error in\n        guard let data = data, error == nil else {\n            print(error?.localizedDescription ?? \"No data\")\n            return\n        }\n        let responseJSON = try? JSONSerialization.jsonObject(with: data, options: [])\n        if let responseJSON = responseJSON as? [String: Any] {\n            print(responseJSON)\n        }\n    }\n\n    task.resume()\n}\n\n\n"
  },
  {
    "path": "compass/Assets.xcassets/arrow.imageset/Contents.json",
    "content": "{\n  \"images\" : [\n    {\n      \"idiom\" : \"universal\",\n      \"filename\" : \"Icon.jpg\",\n      \"scale\" : \"1x\"\n    },\n    {\n      \"idiom\" : \"universal\",\n      \"scale\" : \"2x\"\n    },\n    {\n      \"idiom\" : \"universal\",\n      \"scale\" : \"3x\"\n    }\n  ],\n  \"info\" : {\n    \"version\" : 1,\n    \"author\" : \"xcode\"\n  }\n}---FILE_END---\n"
  },
  {
    "path": "compass/Assets.xcassets/AppIcon.appiconset/Contents.json",
    "content": "{\n  \"images\" : [\n    {\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"2x\",\n      \"size\" : \"20x20\"\n    },\n    {\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"3x\",\n      \"size\" : \"20x20\"\n    },\n    {\n      \"filename\" : \"Icon-Small.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"1x\",\n      \"size\" : \"29x29\"\n    },\n    {\n      \"filename\" : \"Icon-Small@2x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"2x\",\n      \"size\" : \"29x29\"\n    },\n    {\n      \"filename\" : \"Icon-Small@3x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"3x\",\n      \"size\" : \"29x29\"\n    },\n    {\n      \"filename\" : \"Icon-Small-40@2x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"2x\",\n      \"size\" : \"40x40\"\n    },\n    {\n      \"filename\" : \"Icon-Small-40@3x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"3x\",\n      \"size\" : \"40x40\"\n    },\n    {\n      \"filename\" : \"Icon.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"1x\",\n      \"size\" : \"57x57\"\n    },\n    {\n      \"filename\" : \"Icon@2x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"2x\",\n      \"size\" : \"57x57\"\n    },\n    {\n      \"filename\" : \"Icon-60@2x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"2x\",\n      \"size\" : \"60x60\"\n    },\n    {\n      \"filename\" : \"Icon-60@3x.png\",\n      \"idiom\" : \"iphone\",\n      \"scale\" : \"3x\",\n      \"size\" : \"60x60\"\n    },\n    {\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"20x20\"\n    },\n    {\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"20x20\"\n    },\n    {\n      \"filename\" : \"Icon-Small.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"29x29\"\n    },\n    {\n      \"filename\" : \"Icon-Small@2x.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"29x29\"\n    },\n    {\n      \"filename\" : \"Icon-Small-40.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"40x40\"\n    },\n    {\n      \"filename\" : \"Icon-Small-40@2x.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"40x40\"\n    },\n    {\n      \"filename\" : \"Icon-Small-50.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"50x50\"\n    },\n    {\n      \"filename\" : \"Icon-Small-50@2x.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"50x50\"\n    },\n    {\n      \"filename\" : \"Icon-72.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"72x72\"\n    },\n    {\n      \"filename\" : \"Icon-72@2x.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"72x72\"\n    },\n    {\n      \"filename\" : \"Icon-76.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"1x\",\n      \"size\" : \"76x76\"\n    },\n    {\n      \"filename\" : \"Icon-76@2x.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"76x76\"\n    },\n    {\n      \"filename\" : \"Icon-167.png\",\n      \"idiom\" : \"ipad\",\n      \"scale\" : \"2x\",\n      \"size\" : \"83.5x83.5\"\n    },\n    {\n      \"idiom\" : \"ios-marketing\",\n      \"scale\" : \"1x\",\n      \"size\" : \"1024x1024\"\n    }\n  ],\n  \"info\" : {\n    \"author\" : \"xcode\",\n    \"version\" : 1\n  }\n}\n"
  }
]